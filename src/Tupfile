include_rules

: foreach *.vala |> !fast-vapi |>

# Main is special since it has dependencies.
VAPISFILES += windows/sync_sample_1.vapi \
              windows/sync_sample_2.vapi

VAPISPARAMS += --use-fast-vapi=windows/sync_sample_1.vapi \
               --use-fast-vapi=windows/sync_sample_2.vapi

: main.vala | $(VAPISFILES) |> !valac |>

: foreach *.c |> !ccobj |>

# Now that all the .o files should be generated, build object file.
: main.o windows/sync_sample_1.o windows/sync_sample_2.o |> !ccbin |> main
